(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{502:function(e,t,a){},515:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(96),i=a.n(s),r=a(17),o=a(45),l=a(31),d=a(67),u=a.n(d),j=a(168),b=a(80),m=a.n(b),h=a(112),O=a.n(h),x="AUTH checking JWT finish",f="AUTH login",g="AUTH logout",p="AUTH new user",v="DASHBOARD add messages",y="DASHBOARD add chat messages",N="DASHBOARD add users",w="DASHBOARD clean",_="DASHBOARD select user",S="DASHBOARD add all registered users",k="STATS load stats",C=function(e){return{type:f,payload:e}},E=function(){return{type:p}},T=function(){return{type:x}},R=a(525),A=a(526),D=a(273),I=a(28),P=a(522),U=a(293),H=a(523),F=a(88),W=a(270),$=function(e){return{type:v,payload:e}},L=function(e){return{type:y,payload:e}},K=function(e){return{type:_,payload:e}},M=a(3),z=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.auth})).uid,a=Object(r.c)((function(e){return e.dashboard})).selectedUser,n=Object(r.c)((function(e){return e.dashboard})).users;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h5",{className:"lead ms-4 my-3",children:Object(M.jsx)("strong",{className:"text-light",children:"Conectados"})}),Object(M.jsxs)("button",{onClick:function(){return e(K({}))},className:"text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar ".concat((null===a||void 0===a?void 0:a.name)||(null===a||void 0===a?void 0:a.uid)?"":"user-sidebar-active"),children:[Object(M.jsx)(F.a,{color:"#fff",size:"26px",style:{marginRight:"10px"},className:"ms-3"}),Object(M.jsxs)("span",{className:"fw-bold",children:["Sala general ",Object(M.jsx)("i",{className:"fas fa-circle mx-2",style:{fontSize:"12px",color:"#1DD200"}})]})]}),Object(M.jsx)("div",{className:"w-100 overflow-auto",style:{height:"45vh"},children:n&&n.map((function(n){return(null===n||void 0===n?void 0:n.id)!==t&&Object(M.jsxs)("button",{onClick:function(){return e(K({uid:null===n||void 0===n?void 0:n.id,name:null===n||void 0===n?void 0:n.name}))},className:"text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar ".concat(n.id===(null===a||void 0===a?void 0:a.uid)?"user-sidebar-active":""),children:[Object(M.jsx)(F.a,{color:"#fff",size:"26px",style:{marginRight:"10px"},className:"ms-3"}),Object(M.jsxs)("span",{className:"fw-bold",children:[n.name," ",Object(M.jsx)("i",{className:"fas fa-circle mx-2",style:{fontSize:"12px",color:"#1DD200"}})]})]},n.id)}))})]})},B=function(){var e=Object(r.c)((function(e){return e.dashboard})).allUsers,t=Object(r.c)((function(e){return e.auth})).uid;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h5",{className:"lead ms-4 my-3",children:Object(M.jsx)("strong",{className:"text-light",children:"Todos"})}),Object(M.jsx)("div",{className:"w-100 overflow-auto",style:{height:"55vh"},children:e&&e.map((function(e){return(null===e||void 0===e?void 0:e.id)!==t&&Object(M.jsxs)("button",{className:"text-white w-100 text-start animate__animated animate animate__fadeIn user-sidebar",children:[Object(M.jsx)(F.a,{color:"#fff",size:"26px",style:{marginRight:"10px"},className:"ms-3"}),Object(M.jsx)("span",{className:"fw-bold",children:e.name})]},e.uid)}))})]})},V=a(108),G=function(){var e=Object(n.useState)("online"),t=Object(I.a)(e,2),a=t[0],c=t[1],s=Object(r.b)(),i=Object(r.c)((function(e){return e.auth})),l=i.uid,d=i.name,u=Object(r.c)((function(e){return e.dashboard})).users,j=Object(r.c)((function(e){return e.dashboard})).selectedUser,b=Object(n.useCallback)((function(){u.find((function(e){return e.id===(null===j||void 0===j?void 0:j.uid)}))||s(K({}))}),[u,null===j||void 0===j?void 0:j.uid,s]);Object(n.useEffect)((function(){b()}),[u,b]);return Object(M.jsxs)("aside",{className:"h-100",children:[Object(M.jsx)("header",{children:Object(M.jsxs)("div",{className:"w-100 bg-dark d-flex justify-content-between align-items-center px-2",style:{height:"60px"},children:[Object(M.jsxs)("div",{children:[Object(M.jsx)(F.a,{color:"#fff",size:"26px",style:{marginRight:"10px"},className:"ms-3"}),Object(M.jsx)("span",{className:"fw-bold text-white",children:d})]}),Object(M.jsxs)(P.a,{title:Object(M.jsx)(W.a,{}),id:"dropdown-item-button",variant:"dark",className:"bg-dark",children:[Object(M.jsx)(U.a.ItemText,{className:"bg-secondary text-light",children:Object(M.jsx)("strong",{children:"Opciones"})}),Object(M.jsx)(U.a.Item,{as:"button",onClick:function(){s({type:g}),s({type:w}),localStorage.removeItem("chat-token")},className:"bg-secondary text-light",children:"Salir"})]})]})}),Object(M.jsx)("p",{className:"text-muted text-center mt-2",children:l}),Object(M.jsx)("div",{className:"w-100 d-flex justify-content-center mb-3",children:Object(M.jsxs)(o.b,{to:"/stats",className:"btn btn-outline-info d-flex align-items-center",children:[Object(M.jsx)(V.a,{className:"me-1"}),"Estad\xedsticas"]})}),Object(M.jsxs)("div",{children:[Object(M.jsxs)(H.a,{"aria-label":"selecci\xf3n",className:"w-100",children:[Object(M.jsx)("button",{onClick:function(){return c("online")},className:"button-group ".concat("online"===a&&"button-group-active"," fw-bold text-white"),style:{width:"50%"},children:"Conectados"}),Object(M.jsx)("button",{onClick:function(){return c("all")},className:"button-group ".concat("all"===a&&"button-group-active"," fw-bold text-white"),style:{width:"50%"},children:"Todos"})]}),"online"===a?Object(M.jsx)(z,{}):Object(M.jsx)(B,{})]})]})},q=a(6),J=a.n(q),X=a(524),Q=a(533),Y=function(e){var t=e.text,a=e.name,n=e.date;return Object(M.jsxs)(Q.a.div,{animate:{scale:[1,1.1,1]},className:"px-3 py-1 d-flex flex-column rounded text-white mb-3 animate__animated animate__fadeIn",style:{paddingLeft:"10px",paddingRight:"20px",background:"#262D31",marginLeft:"60px",maxWidth:"60%"},children:[a&&Object(M.jsxs)("div",{className:"lead fw-bold d-flex justify-content-between align-items-center",style:{fontSize:"14px"},children:[a,Object(M.jsx)(P.a,{title:"",size:"sm",id:"dropdown-item-button",children:Object(M.jsx)(U.a.Item,{as:"button",onClick:function(){navigator.clipboard.writeText(t).then((function(){O.a.fire("Mensaje copiado")}))},className:"bg-secondary text-light",children:"Copiar texto"})})]}),t,Object(M.jsx)("span",{className:"d-block text-muted align-self-end",style:{fontSize:"12px"},children:n})]})},Z=function(e){var t=e.text,a=e.date;return Object(M.jsxs)(Q.a.div,{animate:{scale:[1,1.1,1]},className:"px-3 py-1 d-flex flex-column rounded text-white mb-3 animate__animated animate__fadeIn",style:{marginRight:"60px",backgroundColor:"#056162",maxWidth:"60%"},children:[t,Object(M.jsx)("span",{className:"d-block text-light align-self-end",style:{fontSize:"12px"},children:a})]})},ee=function(e){var t=e.sendMessage,a=Object(n.useRef)(),c=Object(r.c)((function(e){return e.dashboard})).messages,s=Object(r.c)((function(e){return e.auth})).uid,i=Object(n.useCallback)((function(e){e&&e.scrollIntoView({behavior:"smooth"})}),[]);return Object(M.jsxs)("div",{className:"chat w-100",children:[Object(M.jsxs)("div",{className:"d-flex align-items-center",style:{background:"#2A2F32"},children:[Object(M.jsx)("img",{src:"./assets/img1.jpg",alt:"Foto de perfil de grupo",id:"img-chat",className:"ms-3"}),Object(M.jsx)("span",{className:"text-white fw-bold ms-3",children:"Chat general"})]}),Object(M.jsxs)("div",{className:"chat-messages overflow-auto pt-4",style:{background:"#333A41"},children:[0===c.length&&Object(M.jsx)("div",{className:"alert alert-warning text-center mx-5",children:"Todav\xeda no hay mensajes, comienza escribiendo uno."}),0===c.length&&Object(M.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(M.jsx)(X.a,{animation:"border",role:"status",variant:"primary"})}),c&&c.map((function(e,t){var a=c.length-1===t;return e.user._id===s?Object(M.jsx)("div",{className:"d-flex w-100 align-items-end flex-column",ref:a?i:null,children:Object(M.jsx)(Z,{text:e.message,date:e.date},t)},t):Object(M.jsx)("div",{className:"d-flex w-100 align-items-start flex-column",ref:a?i:null,children:Object(M.jsx)(Y,{text:e.message,name:e.user.name,date:e.date},t)},t)}))]}),Object(M.jsx)("div",{id:"chat-input",style:{height:"100%",width:"100%",padding:"0 150px",background:"#2A2F32"},children:Object(M.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===a.current.value||t(a.current.value),a.current.value=""},className:"h-100 d-flex align-items-center",children:[Object(M.jsx)("input",{ref:a,type:"text",className:"w-100",id:"message-input",placeholder:"Escribe un mensaje",autoComplete:"off"}),Object(M.jsx)("button",{type:"submit",id:"message-submit",className:"d-flex align-items-center",children:Object(M.jsx)(V.b,{color:"#fff",size:"18px"})})]})})]})};ee.propType={sendMessage:J.a.func.isRequired};var te=function(e){var t=e.sendPrivateMessage,a=Object(n.useRef)(),c=Object(r.c)((function(e){return e.dashboard})).selectedUser,s=Object(r.c)((function(e){return e.dashboard})).chatMessages,i=Object(r.c)((function(e){return e.auth})).uid,o=Object(r.b)(),l=Object(n.useCallback)((function(e){e&&e.scrollIntoView({behavior:"smooth"})}),[]);return Object(n.useEffect)((function(){(null===c||void 0===c?void 0:c.uid)&&m.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,"/messages/get-all-chat/").concat(i,"/").concat(null===c||void 0===c?void 0:c.uid),{headers:{"x-token":localStorage.getItem("chat-token"),"Content-Type":"application/json"}}).then((function(e){var t=e.data;return o(L(t.messagesChat))}))}),[null===c||void 0===c?void 0:c.uid,null===c||void 0===c?void 0:c.name,i,o]),Object(M.jsxs)("div",{className:"chat w-100",children:[Object(M.jsx)("div",{className:"py-2 d-flex align-items-center",style:{background:"#2A2F32"},children:Object(M.jsx)("span",{className:"text-white fw-bold ms-3",children:c.name})}),Object(M.jsxs)("div",{className:"chat-messages overflow-auto pt-4",style:{background:"#333A41"},children:[0===s.length&&Object(M.jsxs)("div",{className:"alert alert-warning text-center mx-5",children:["Todav\xeda no hay mensajes, comienza escribiendole un mensaje a ",null===c||void 0===c?void 0:c.name,"."]}),0===s.length&&Object(M.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(M.jsx)(X.a,{animation:"border",role:"status",variant:"primary"})}),s&&s.map((function(e,t){var a=s.length-1===t;return e.recipient!==i?Object(M.jsx)("div",{className:"d-flex w-100 align-items-end flex-column",ref:a?l:null,children:Object(M.jsx)(Z,{text:e.message,date:e.date},t)},t):Object(M.jsx)("div",{className:"d-flex w-100 align-items-start flex-column",ref:a?l:null,children:Object(M.jsx)(Y,{text:e.message,date:e.date},t)},t)}))]}),Object(M.jsx)("div",{id:"chat-input",style:{height:"100%",width:"100%",padding:"0 150px",background:"#2A2F32"},children:Object(M.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===a.current.value||t(a.current.value),a.current.value=""},className:"h-100 d-flex align-items-center",children:[Object(M.jsx)("input",{ref:a,type:"text",className:"w-100",id:"message-input",placeholder:"Escribe un mensaje",autoComplete:"off"}),Object(M.jsx)("button",{type:"submit",id:"message-submit",className:"bg-primary",children:Object(M.jsx)(V.b,{color:"#fff"})})]})})]})},ae=a(200),ne=a.n(ae),ce=a(201),se=c.a.createContext();var ie=function(e){var t=e.children,a=Object(n.useState)(),c=Object(I.a)(a,2),s=c[0],i=c[1],o=Object(r.c)((function(e){return e.auth})),l=o.uid,d=o.name,u=Object(r.c)((function(e){return e.dashboard})).selectedUser,j=Object(r.b)(),b=Object(n.useCallback)((function(e){var t=ne()(new Date),a=t.$H>12?t.$H-=12:t.$H,n="".concat(a,":").concat(1===t.$m.toString().length?"0".concat(t.$m):t.$m," ").concat(t.$D,"/").concat(t.$W,"/").concat(t.$y);s.emit("send-message",{message:e,user:l,date:n})}),[s,l]),m=Object(n.useCallback)((function(e){var t=ne()(new Date),a=t.$H>12?t.$H-=12:t.$H,n="".concat(a,":").concat(1===t.$m.toString().length?"0".concat(t.$m):t.$m," ").concat(t.$D,"/").concat(t.$W,"/").concat(t.$y);s.emit("send-private-message",[{message:e,date:n},{uid:u.uid,name:u.name}])}),[null===u||void 0===u?void 0:u.uid,null===u||void 0===u?void 0:u.name,s]);Object(n.useEffect)((function(){if(!s){var e=Object(ce.io)("http://localhost:5000",{query:{uid:l,name:d}});return i(e),function(){return e.close()}}}),[l,d,s]),Object(n.useEffect)((function(){if(s)return s.on("receive-messages",(function(e){j($(e))})),function(){return s.off("receive-messages")}}),[s,j]),Object(n.useEffect)((function(){if(s)return s.on("created-message",(function(e){j($(e))})),function(){return s.off("created-message")}}),[s,j]),Object(n.useEffect)((function(){if(s)return s.on("active-users",(function(e){j(function(e){return{type:N,payload:e}}(e))})),function(){return s.off("active-users")}}),[s,j]),Object(n.useEffect)((function(){if(s)return s.on("private-messages",(function(e){j(L(e))})),function(){return s.off("private-messages")}}),[s,j]),Object(n.useEffect)((function(){if(s)return s.on("registered-users",(function(e){j(function(e){return{type:S,payload:e}}(e))})),function(){return s.off("registered-users")}}),[s,j]),Object(n.useEffect)((function(){var e=Object(ce.io)("http://localhost:5000",{query:{uid:l,name:d}});return i(e),function(){return e.close()}}),[l,d]),Object(n.useEffect)((function(){if(s)return s.on("get-stats",(function(e){j(function(e){return{type:k,payload:e}}(e))})),function(){return s.off("get-stats")}}),[s,j]);var h={sendMessage:b,sendPrivateMessage:m};return Object(M.jsx)(se.Provider,{value:h,children:t})},re=a(79),oe=function(){var e=Object(r.c)((function(e){return e.auth})).name,t=Object(r.c)((function(e){return e.dashboard})),a=t.selectedUser,c=t.messages,s=Object(n.useContext)(se),i=s.sendMessage,o=s.sendPrivateMessage,l=Object(r.b)();return Object(n.useEffect)((function(){0===c.length&&m.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,"/messages/get-all"),{headers:{"x-token":localStorage.getItem("chat-token"),"Content-Type":"application/json"}}).then((function(e){var t=e.data;return l($(t.messages))}))}),[l,c]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(re.a,{children:[Object(M.jsxs)("title",{children:[e," | ChatRoom"]}),Object(M.jsx)("meta",{name:"description",content:"Contenido principal del usuario y salas de chat"})]}),Object(M.jsx)(R.a,{fluid:!0,children:Object(M.jsxs)(A.a,{children:[Object(M.jsx)(D.a,{md:4,style:{background:"#262D31"},className:"p-0",children:Object(M.jsx)(G,{})}),Object(M.jsx)(D.a,{md:8,className:"p-0 d-flex",children:Object(M.jsx)("div",{className:"d-flex",style:{height:"100vh",width:"100%"},children:(null===a||void 0===a?void 0:a.uid)&&(null===K||void 0===K?void 0:K.name)?Object(M.jsx)(te,{sendPrivateMessage:o}):Object(M.jsx)(ee,{sendMessage:i})})})]})})]})},le=a(527),de=a(528),ue=a(532),je=a(290),be=a(291),me=a(138),he=a(133),Oe=a(295),xe=a(274),fe=function(){var e=Object(r.c)((function(e){return e.stats})).countMessages;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(re.a,{children:[Object(M.jsx)("title",{children:"Stats"}),Object(M.jsx)("meta",{name:"description",content:"Estadisticas del chat general"})]}),Object(M.jsx)(R.a,{fluid:!0,children:Object(M.jsx)(A.a,{children:Object(M.jsx)(D.a,{md:12,style:{background:"#333A41"},className:"p-0",children:Object(M.jsxs)("div",{style:{height:"100vh"},children:[Object(M.jsx)("div",{className:"px-3 py-2",style:{background:"#2A2F32"},children:Object(M.jsxs)(o.b,{to:"/",className:"btn btn-outline-info fw-bold d-flex align-items-center d-inline-flex",children:[Object(M.jsx)(xe.a,{}),"Inicio"]})}),Object(M.jsx)("h3",{className:"text-white text-center mt-5",children:"Usuarios que m\xe1s mensajes han enviado"}),Object(M.jsx)("h4",{className:"text-info text-center",children:"En el chat general"}),Object(M.jsx)(le.a,{width:"100%",height:"60%",className:"mt-5",children:Object(M.jsxs)(de.a,{width:500,height:300,data:e,margin:{top:5,right:30,left:20,bottom:5},children:[Object(M.jsx)(ue.a,{strokeDasharray:"3 3"}),Object(M.jsx)(je.a,{dataKey:"name"}),Object(M.jsx)(be.a,{}),Object(M.jsx)(me.a,{}),Object(M.jsx)(he.a,{}),Object(M.jsx)(Oe.a,{dataKey:"messages",fill:"#8884d8"})]})})]})})})})]})},ge=a(534),pe=a(269),ve=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useState)(!1),c=Object(I.a)(a,2),s=c[0],i=c[1],l=Object(r.b)();return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(re.a,{children:[Object(M.jsx)("meta",{charSet:"utf-8"}),Object(M.jsx)("title",{children:"Chat | Login"}),Object(M.jsx)("meta",{name:"description",content:"Inicio de sesi\xf3n"})]}),Object(M.jsx)(R.a,{fluid:!0,className:"bg-dark d-flex justify-content-center align-items-center",style:{height:"100vh"},children:Object(M.jsx)("div",{style:{width:"300px"},children:Object(M.jsxs)(ge.a,{onSubmit:function(a){a.preventDefault();var n=e.current.value,c=t.current.value;/^(([^<>()[\].,;:\s@\u201d]+(\.[^<>()[\].,;:\s@\u201d]+)*)|(\u201d.+\u201d))@(([^<>()[\].,;:\s@\u201d]+\.)+[^<>()[\].,;:\s@\u201d]{2,})$/.test(n)&&c.length>=8?(l(function(e,t){return function(){var a=Object(j.a)(u.a.mark((function a(n){var c,s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,"/auth/login"),{email:e,password:t});case 2:c=a.sent,(s=c.data).ok?(localStorage.setItem("chat-token",s.token),n(C({uid:s.user.uid,name:s.user.name,email:s.user.email}))):O.a.fire("Error",s.msg,"error");case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(n,c)),e.current.value="",t.current.value=""):(0===n.length||c.length,i(!0))},className:"animate__animated animate__fadeIn",children:[Object(M.jsx)("h2",{className:"text-white text-start mb-3 texto",children:"ChatRoom"}),Object(M.jsx)("h4",{className:"text-white lead",children:"Inicio de sesi\xf3n"}),Object(M.jsx)(ge.a.Group,{className:"mb-3",children:Object(M.jsx)(ge.a.Control,{className:"bg-dark text-white",type:"email",placeholder:"Correo",ref:e,isInvalid:s})}),Object(M.jsx)(ge.a.Group,{children:Object(M.jsx)(ge.a.Control,{className:"bg-dark text-white",type:"password",placeholder:"Contrase\xf1a",ref:t,isInvalid:s})}),Object(M.jsx)(pe.a,{type:"submit",variant:"outline-primary",className:"w-100 mt-3",children:"Ingresar"}),Object(M.jsx)(o.b,{to:"/auth/register",className:"d-inline-block mt-3",children:"Si no tienes una cuenta"})]})})})]})},ye=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),c=Object(n.useState)(!1),s=Object(I.a)(c,2),i=s[0],l=s[1],d=Object(r.b)();return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(re.a,{children:[Object(M.jsx)("meta",{charSet:"utf-8"}),Object(M.jsx)("title",{children:"Chat | Register"}),Object(M.jsx)("meta",{name:"description",content:"Registro de nuevo usuario"})]}),Object(M.jsx)(R.a,{fluid:!0,className:"bg-dark d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"},children:Object(M.jsx)("div",{style:{width:"300px"},children:Object(M.jsxs)(ge.a,{onSubmit:function(n){n.preventDefault();var c=t.current.value,s=a.current.value,i=e.current.value;/^(([^<>()[\].,;:\s@\u201d]+(\.[^<>()[\].,;:\s@\u201d]+)*)|(\u201d.+\u201d))@(([^<>()[\].,;:\s@\u201d]+\.)+[^<>()[\].,;:\s@\u201d]{2,})$/.test(c)&&s.length>=8&&i.length>0?(d(function(e,t,a){return function(){var n=Object(j.a)(u.a.mark((function n(c){var s,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,"/auth/register"),{name:e,email:t,password:a});case 2:s=n.sent,(i=s.data).ok?(localStorage.setItem("chat-token",i.token),c(E()),c(C({uid:i.user.uid,name:i.user.name,email:i.user.email})),O.a.fire({position:"bottom-end",icon:"success",title:"Cuenta creada",showConfirmButton:!1,timer:1500})):O.a.fire("Error",i.msg,"error");case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(i,c,s)),e.current.value="",t.current.value="",a.current.value=""):(0===c.length||s.length<6||i.length,l(!0))},className:"animate__animated animate__fadeIn",children:[Object(M.jsx)("h2",{className:"text-white text-start mb-3 texto",children:"ChatRoom"}),Object(M.jsx)("h4",{className:"text-white lead mt-3",children:"Registro"}),Object(M.jsx)(ge.a.Group,{className:"mb-3",children:Object(M.jsx)(ge.a.Control,{className:"bg-dark text-white",type:"text",placeholder:"Nombre",ref:e,isInvalid:i})}),Object(M.jsx)(ge.a.Group,{className:"mb-3",children:Object(M.jsx)(ge.a.Control,{className:"bg-dark text-white",type:"email",placeholder:"Correo",ref:t,isInvalid:i})}),Object(M.jsx)(ge.a.Group,{children:Object(M.jsx)(ge.a.Control,{className:"bg-dark text-white",type:"password",placeholder:"Contrase\xf1a",ref:a,isInvalid:i})}),Object(M.jsx)(pe.a,{type:"submit",variant:"outline-primary",className:"w-100 mt-3",children:"Registrarme"}),Object(M.jsx)(o.b,{to:"/auth/login",className:"d-inline-block mt-3",children:"Si ya tienes una cuenta"})]})})})]})},Ne=function(){return Object(M.jsx)(o.a,{children:Object(M.jsxs)(l.d,{children:[Object(M.jsx)(l.b,{path:"/auth/login",component:ve}),Object(M.jsx)(l.b,{path:"/auth/register",component:ye}),Object(M.jsx)(l.a,{to:"/auth/login"})]})})},we=a(23),_e=a(164),Se=function(e){var t=e.isAuthenticated,a=e.component,n=Object(_e.a)(e,["isAuthenticated","component"]);return Object(M.jsx)(l.b,Object(we.a)(Object(we.a)({},n),{},{component:function(e){return t?Object(M.jsx)(a,Object(we.a)({},e)):Object(M.jsx)(l.a,{to:"/login"})}}))},ke=function(e){var t=e.isAuthenticated,a=e.component,n=Object(_e.a)(e,["isAuthenticated","component"]);return Object(M.jsx)(l.b,Object(we.a)(Object(we.a)({},n),{},{component:function(e){return t?Object(M.jsx)(l.a,{to:"/"}):Object(M.jsx)(a,Object(we.a)({},e))}}))},Ce=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.auth})),a=t.checking,c=t.uid;return Object(n.useEffect)((function(){e(function(){var e=Object(j.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,"/auth/renew"),{headers:{"x-token":localStorage.getItem("chat-token"),"Content-Type":"application/json"}});case 2:a=e.sent,(n=a.data).ok?(localStorage.setItem("chat-token",n.token),t(C({uid:n.user.uid,name:n.user.name,email:n.user.email}))):t(T());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),a?Object(M.jsx)("div",{className:"flexible",children:Object(M.jsxs)("div",{className:"sk-chase",children:[Object(M.jsx)("div",{className:"sk-chase-dot"}),Object(M.jsx)("div",{className:"sk-chase-dot"}),Object(M.jsx)("div",{className:"sk-chase-dot"}),Object(M.jsx)("div",{className:"sk-chase-dot"}),Object(M.jsx)("div",{className:"sk-chase-dot"}),Object(M.jsx)("div",{className:"sk-chase-dot"})]})}):Object(M.jsx)(ie,{children:Object(M.jsx)(o.a,{children:Object(M.jsxs)(l.d,{children:[Object(M.jsx)(ke,{isAuthenticated:!!c,path:"/auth",component:Ne}),Object(M.jsx)(Se,{isAuthenticated:!!c,exact:!0,path:"/",component:oe}),Object(M.jsx)(Se,{isAuthenticated:!!c,path:"/stats",component:fe}),Object(M.jsx)(l.a,{to:"/auth/login"})]})})})},Ee=a(137),Te=a(292),Re={checking:!0,newUser:!1},Ae={messages:[],users:[],selectedUser:{},chatMessages:[],allUsers:[]},De={countMessages:[]},Ie="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ee.c,Pe=Object(Ee.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(we.a)(Object(we.a)({},e),{},{checking:!1},t.payload);case g:return{checking:!1};case x:return Object(we.a)(Object(we.a)({},e),{},{checking:!1});case p:return Object(we.a)(Object(we.a)({},e),{},{newUser:!0});default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(we.a)(Object(we.a)({},e),{},{messages:t.payload});case N:return Object(we.a)(Object(we.a)({},e),{},{users:t.payload});case w:return{messages:[],users:[]};case _:return Object(we.a)(Object(we.a)({},e),{},{selectedUser:t.payload});case y:return Object(we.a)(Object(we.a)({},e),{},{chatMessages:t.payload});case S:return Object(we.a)(Object(we.a)({},e),{},{allUsers:t.payload});default:return e}},stats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(we.a)(Object(we.a)({},e),{},{countMessages:t.payload});default:return e}}}),Ue=Object(Ee.d)(Pe,Ie(Object(Ee.a)(Te.a)));a(502),a(503);var He=function(){return Object(M.jsx)(r.a,{store:Ue,children:Object(M.jsx)(Ce,{})})};a(504),a(505);i.a.render(Object(M.jsx)(He,{}),document.getElementById("root"))}},[[515,1,2]]]);
//# sourceMappingURL=main.b8b8e2fb.chunk.js.map