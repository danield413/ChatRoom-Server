(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(27),i=n.n(a),r=n(14),l=n(115),d=n(116),u=n(64),o=n(56),j=n.n(o),m=n(2),b=s.a.createContext(),x=function(){return Object(c.useContext)(b)},f=function(e){var t=e.id,n=e.name,s=e.children,a=Object(c.useState)(),i=Object(r.a)(a,2),l=i[0],d=i[1],u=Object(c.useState)([]),o=Object(r.a)(u,2),x=o[0],f=o[1],h=Object(c.useState)([]),O=Object(r.a)(h,2),v=O[0],g=O[1];Object(c.useEffect)((function(){var e=j()("http://localhost:5000",{query:{id:t,name:n}});return d(e),function(){return e.close()}}),[t,n]),Object(c.useEffect)((function(){if(l)return l.on("receive-messages",(function(e){f(e)})),function(){return l.off("receive-messages")}}),[l,f]),Object(c.useEffect)((function(){if(l)return l.on("created-message",(function(e){f(e)})),function(){return l.off("created-message")}}),[l,f]),Object(c.useEffect)((function(){if(l)return l.on("active-users",(function(e){g(e)})),function(){return l.off("active-users")}}),[l,g]);var p={socket:l,sendMessage:function(e,n){l.emit("send-message",{message:e,from:t,fromName:n})},messages:x,users:v,listUsers:function(){return v.map((function(e){return e.name})).join(", ")}};return Object(m.jsx)(b.Provider,{value:p,children:s})},h=n(114),O=n(65),v=n(61),g=n(57),p=n(62),y=function(e){var t=e.id,n=e.name,c=e.idLogout,s=x().users;return Object(m.jsxs)("aside",{className:"h-100 py-2 ",children:[Object(m.jsxs)("div",{className:"w-100 bg-primary rounded d-flex justify-content-between align-items-center px-2",style:{height:"40px"},children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(g.a,{color:"#fff",size:"26px",style:{marginRight:"10px"}}),Object(m.jsx)("span",{className:"fw-bold",children:n})]}),Object(m.jsxs)(h.a,{title:Object(m.jsx)(p.a,{}),id:"dropdown-item-button",children:[Object(m.jsx)(O.a.ItemText,{children:Object(m.jsx)("strong",{children:"Opciones"})}),Object(m.jsx)(O.a.Item,{as:"button",onClick:function(){c(null)},children:"Salir"})]})]}),Object(m.jsx)("p",{className:"text-muted text-center mt-2",children:t}),Object(m.jsx)("h5",{children:Object(m.jsx)("strong",{className:"text-white",children:"Conectados en la sala"})}),s&&s.map((function(e){return Object(m.jsxs)(v.a,{className:"text-white my-2 w-100 text-start animate__animated animate animate__bounceIn",variant:"outline-primary",children:[Object(m.jsx)("i",{className:"fas fa-circle mx-2",style:{fontSize:"12px",color:"#1DD200"}}),Object(m.jsx)("span",{children:e.name})]},e.id)}))]})},N=n(63),w=function(e){var t=e.text,n=e.name;return Object(m.jsxs)("div",{className:"px-3 py-1 rounded text-white mb-3 animate__animated animate__bounceIn",style:{paddingLeft:"10px",paddingRight:"20px",background:"#262D31",marginLeft:"60px"},children:[Object(m.jsx)("div",{className:"lead fw-bold",style:{fontSize:"14px"},children:n}),t]})},S=function(e){var t=e.text;return Object(m.jsx)("div",{className:"px-3 py-1 rounded bg-primary text-white mb-3 animate__animated animate__bounceIn",style:{marginRight:"60px"},children:t})},_=function(e){var t=e.id,n=e.name,s=Object(c.useRef)(),a=x(),i=a.messages,r=a.sendMessage,l=Object(c.useCallback)((function(e){e&&e.scrollIntoView({smooth:!0})}),[]);return Object(m.jsxs)("div",{className:"chat w-100",children:[Object(m.jsx)("div",{className:"chat-messages bg-dark overflow-auto",children:i&&i.map((function(e,n){var c=i.length-1===n;return e.from===t?Object(m.jsx)("div",{className:"d-flex w-100 align-items-end flex-column",ref:c?l:null,children:Object(m.jsx)(S,{text:e.message},n)}):Object(m.jsx)("div",{className:"d-flex w-100 align-items-start flex-column",ref:c?l:null,children:Object(m.jsx)(w,{text:e.message,name:e.fromName},n)})}))}),Object(m.jsx)("div",{id:"chat-input",style:{height:"100%",width:"100%",padding:"0 150px",background:"#2A2F32"},children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===s.current.value||r(s.current.value,n),s.current.value=""},className:"h-100 d-flex align-items-center",children:[Object(m.jsx)("input",{ref:s,type:"text",className:"w-100",id:"message-input",placeholder:"Escribe un mensaje",autoComplete:"off"}),Object(m.jsx)("button",{type:"submit",id:"message-submit",className:"bg-primary",children:Object(m.jsx)(N.a,{color:"#fff"})})]})})]})},k=function(e){var t=e.id,n=e.name,c=e.idLogout;return Object(m.jsx)(f,{id:t,name:n,children:Object(m.jsx)(l.a,{fluid:!0,style:{height:"100vh",width:"100%"},children:Object(m.jsxs)(d.a,{style:{height:"100%"},children:[Object(m.jsx)(u.a,{md:3,style:{background:"#262D31"},className:"border-end",children:Object(m.jsx)(y,{name:n,idLogout:c,id:t})}),Object(m.jsx)(u.a,{md:9,className:"p-0",children:Object(m.jsx)("div",{className:"d-flex",style:{height:"100vh",width:"100%"},children:Object(m.jsx)(_,{name:n,id:t})})})]})})})},C=n(117),I=n(118),D=function(e){var t=e.idSubmit,n=Object(c.useRef)(),s=Object(c.useState)(!1),a=Object(r.a)(s,2),i=a[0],d=a[1];return Object(m.jsx)(l.a,{fluid:!0,className:"bg-dark d-flex justify-content-center align-items-center",style:{height:"100vh"},children:Object(m.jsx)("div",{style:{width:"300px"},children:Object(m.jsxs)(C.a,{onSubmit:function(e){if(e.preventDefault(),0===n.current.value.length||n.current.value.length<4)d(!0);else{d(!1);var c=Object(I.a)();t({uid:c,name:n.current.value})}},children:[Object(m.jsx)("h2",{className:"text-white text-center mb-5",children:"Chat Room"}),Object(m.jsx)(C.a.Group,{children:Object(m.jsx)(C.a.Control,{type:"text",placeholder:"Nombre",ref:n,isInvalid:i})}),Object(m.jsx)(v.a,{type:"submit",variant:"outline-primary",className:"w-100 mt-3",children:"Ingresar"})]})})})},E=s.a.createContext(),L=function(e){e.id,e.name;var t=e.children;return Object(m.jsx)(E.Provider,{value:{},children:t})};n(106),n(107);var R=function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2),n=t[0],s=t[1];return Object(m.jsx)(L,{id:null===n||void 0===n?void 0:n.uid,name:null===n||void 0===n?void 0:n.name,children:null!==n?Object(m.jsx)(k,{id:null===n||void 0===n?void 0:n.uid,name:null===n||void 0===n?void 0:n.name,idLogout:s}):Object(m.jsx)(D,{idSubmit:s})})};n(108);i.a.render(Object(m.jsx)(R,{}),document.getElementById("root"))}},[[109,1,2]]]);
//# sourceMappingURL=main.fd6d165e.chunk.js.map